/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.8.3/userguide/building_java_projects.html
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
}

repositories {
    // Use JCenter for resolving dependencies.
    mavenCentral()
}
ext {
    testNgVersion = '7.3.0'
    assertJVersion = '3.15.0'
    awaitilityVersion = '4.0.2'
    lombokVersion = '1.18.12'
    log4jVersion = '2.13.3'
    slf4jApiVersion = '1.7.30'
    webdrivermanagerVersion = '3.6.2'
    seleniumJavaVersion = '4.0.0-alpha-7'
}

dependencies {
    // Use TestNG framework, also requires calling test.useTestNG() below
    testImplementation 'org.testng:testng:7.3.0'

    // This dependency is used by the application.
    implementation 'com.google.guava:guava:29.0-jre'

    // Test Framework
    compile group: 'org.testng', name: 'testng', version: "${testNgVersion}"
    // Driver Manager (Used to download drivers)
    compile group: 'io.github.bonigarcia', name: 'webdrivermanager', version: "${webdrivermanagerVersion}"
    // UI Test Framework
    // https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java
    compile group: 'org.seleniumhq.selenium', name: 'selenium-java', version: "${seleniumJavaVersion}"

    compile group: 'org.projectlombok', name: 'lombok', version: "${lombokVersion}"
    //Creates custom waits
    compile group: 'org.awaitility', name: 'awaitility', version: "${awaitilityVersion}"
    //more readable assertions
    compile group: 'org.assertj', name: 'assertj-core', version: "${assertJVersion}"
    //Logging Framework
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: "${log4jVersion}"
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: "${log4jVersion}"
    compile group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: "${log4jVersion}"
    compile group: 'org.slf4j', name: 'slf4j-api', version: "${slf4jApiVersion}"
}

test {
    // Use TestNG for unit tests
    useTestNG()
}

task VectraRunTest(type: Test) {
    // ---Set Browser Type: "chrome" , "firefox"
    systemProperty "browser", "firefox"
    //systemProperty "browser", "chrome"
    systemProperty "baseUrl", "https://www.vectra.pl/"
    testLogging.showStandardStreams = true
    useTestNG()
            {
                suites 'src/test/resources/TestCase.xml'
            }
    testLogging {
        events "passed", "skipped", "failed"
    }

}
